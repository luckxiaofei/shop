{"remainingRequest":"/Users/luck/shop/admin_web/node_modules/babel-loader/lib/index.js!/Users/luck/shop/admin_web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/luck/shop/admin_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luck/shop/admin_web/src/views/promotion/topic.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/luck/shop/admin_web/src/views/promotion/topic.vue","mtime":1585976621984},{"path":"/Users/luck/shop/admin_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luck/shop/admin_web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/luck/shop/admin_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luck/shop/admin_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nvar _interopRequireDefault = require(\"/Users/luck/shop/admin_web/node_modules/@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _interopRequireWildcard2 = _interopRequireDefault(require(\"/Users/luck/shop/admin_web/node_modules/@babel/runtime-corejs2/helpers/interopRequireWildcard\"));\n\nrequire(\"core-js/modules/web.dom.iterable\");\n\nvar _topic = require(\"@/api/topic\");\n\nvar _BackToTop = _interopRequireDefault(require(\"@/components/BackToTop\"));\n\nvar _Pagination = _interopRequireDefault(require(\"@/components/Pagination\"));\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n// Secondary package based on el-pagination\nvar _default = {\n  name: 'Topic',\n  components: {\n    BackToTop: _BackToTop.default,\n    Pagination: _Pagination.default\n  },\n  data: function data() {\n    return {\n      list: [],\n      total: 0,\n      listLoading: true,\n      listQuery: {\n        page: 1,\n        limit: 20,\n        title: undefined,\n        subtitle: undefined,\n        sort: 'add_time',\n        order: 'desc'\n      },\n      options: [{\n        value: 'id',\n        label: '按序号排序'\n      }, {\n        value: 'add_time',\n        label: '按时间排序'\n      }, {\n        value: 'price',\n        label: '按价格排序'\n      }],\n      multipleSelection: [],\n      contentDetail: '',\n      contentDialogVisible: false,\n      downloadLoading: false\n    };\n  },\n  created: function created() {\n    this.getList();\n  },\n  methods: {\n    getList: function getList() {\n      var _this = this;\n\n      this.listLoading = true;\n      (0, _topic.listTopic)(this.listQuery).then(function (response) {\n        _this.list = response.data.data.list;\n        _this.total = response.data.data.total;\n        _this.listLoading = false;\n      }).catch(function () {\n        _this.list = [];\n        _this.total = 0;\n        _this.listLoading = false;\n      });\n    },\n    handleFilter: function handleFilter() {\n      this.listQuery.page = 1;\n      this.getList();\n    },\n    handleCreate: function handleCreate() {\n      this.$router.push({\n        path: '/promotion/topic-create'\n      });\n    },\n    handleUpdate: function handleUpdate(row) {\n      this.$router.push({\n        path: '/promotion/topic-edit',\n        query: {\n          id: row.id\n        }\n      });\n    },\n    handleDelete: function handleDelete(row) {\n      var _this2 = this;\n\n      (0, _topic.deleteTopic)(row).then(function (response) {\n        _this2.$notify.success({\n          title: '成功',\n          message: '删除专题成功'\n        });\n\n        var index = _this2.list.indexOf(row);\n\n        _this2.list.splice(index, 1);\n      }).catch(function (response) {\n        _this2.$notify.error({\n          title: '失败',\n          message: response.data.errmsg\n        });\n      });\n    },\n    handleSelectionChange: function handleSelectionChange(val) {\n      this.multipleSelection = val;\n    },\n    showContent: function showContent(content) {\n      this.contentDetail = content;\n      this.contentDialogVisible = true;\n    },\n    handleBatchDelete: function handleBatchDelete() {\n      var _this3 = this;\n\n      if (this.multipleSelection.length === 0) {\n        this.$message.error('请选择至少一条记录');\n        return;\n      }\n\n      var ids = [];\n\n      _lodash.default.forEach(this.multipleSelection, function (item) {\n        ids.push(item.id);\n      });\n\n      (0, _topic.batchDeleteTopic)({\n        ids: ids\n      }).then(function (response) {\n        _this3.$notify.success({\n          title: '成功',\n          message: '批量删除专题成功'\n        });\n\n        _this3.getList();\n      }).catch(function (response) {\n        _this3.$notify.error({\n          title: '失败',\n          message: response.data.errmsg\n        });\n      });\n    },\n    handleDownload: function handleDownload() {\n      var _this4 = this;\n\n      this.downloadLoading = true;\n      Promise.resolve().then(function () {\n        return (0, _interopRequireWildcard2.default)(require('@/vendor/Export2Excel'));\n      }).then(function (excel) {\n        var tHeader = ['专题ID', '专题标题', '专题子标题', '专题内容', '专题图片', '商品低价', '阅读量', '专题商品'];\n        var filterVal = ['id', 'title', 'subtitle', 'content', 'picUrl', 'price', 'readCount', 'goods'];\n        excel.export_json_to_excel2(tHeader, _this4.list, filterVal, '专题信息');\n        _this4.downloadLoading = false;\n      });\n    }\n  }\n};\nexports.default = _default;",null]}