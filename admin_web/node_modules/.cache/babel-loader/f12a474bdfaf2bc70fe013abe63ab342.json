{"remainingRequest":"/Users/luck/shop/admin_web/node_modules/babel-loader/lib/index.js!/Users/luck/shop/admin_web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/luck/shop/admin_web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/luck/shop/admin_web/src/views/mall/category.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/luck/shop/admin_web/src/views/mall/category.vue","mtime":1585976621977},{"path":"/Users/luck/shop/admin_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luck/shop/admin_web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/luck/shop/admin_web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/luck/shop/admin_web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _category = require(\"@/api/category\");\n\nvar _storage = require(\"@/api/storage\");\n\nvar _auth = require(\"@/utils/auth\");\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nvar _default = {\n  name: 'Category',\n  data: function data() {\n    return {\n      uploadPath: _storage.uploadPath,\n      list: [],\n      listLoading: true,\n      catL1: {},\n      dataForm: {\n        id: undefined,\n        name: '',\n        keywords: '',\n        level: 'L2',\n        pid: 0,\n        desc: '',\n        iconUrl: '',\n        picUrl: ''\n      },\n      dialogFormVisible: false,\n      dialogStatus: '',\n      textMap: {\n        update: '编辑',\n        create: '创建'\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: '类目名不能为空',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  computed: {\n    headers: function headers() {\n      return {\n        'X-Litemall-Admin-Token': (0, _auth.getToken)()\n      };\n    }\n  },\n  created: function created() {\n    this.getList();\n    this.getCatL1();\n  },\n  methods: {\n    getList: function getList() {\n      var _this = this;\n\n      this.listLoading = true;\n      (0, _category.listCategory)().then(function (response) {\n        _this.list = response.data.data.list;\n        _this.listLoading = false;\n      }).catch(function () {\n        _this.list = [];\n        _this.listLoading = false;\n      });\n    },\n    getCatL1: function getCatL1() {\n      var _this2 = this;\n\n      (0, _category.listCatL1)().then(function (response) {\n        _this2.catL1 = response.data.data.list;\n      });\n    },\n    resetForm: function resetForm() {\n      this.dataForm = {\n        id: undefined,\n        name: '',\n        keywords: '',\n        level: 'L2',\n        pid: 0,\n        desc: '',\n        iconUrl: '',\n        picUrl: ''\n      };\n    },\n    onLevelChange: function onLevelChange(value) {\n      if (value === 'L1') {\n        this.dataForm.pid = 0;\n      }\n    },\n    handleCreate: function handleCreate() {\n      var _this3 = this;\n\n      this.resetForm();\n      this.dialogStatus = 'create';\n      this.dialogFormVisible = true;\n      this.$nextTick(function () {\n        _this3.$refs['dataForm'].clearValidate();\n      });\n    },\n    uploadIconUrl: function uploadIconUrl(response) {\n      this.dataForm.iconUrl = response.data.url;\n    },\n    uploadPicUrl: function uploadPicUrl(response) {\n      this.dataForm.picUrl = response.data.url;\n    },\n    createData: function createData() {\n      var _this4 = this;\n\n      this.$refs['dataForm'].validate(function (valid) {\n        if (valid) {\n          (0, _category.createCategory)(_this4.dataForm).then(function (response) {\n            _this4.getList(); // 更新L1目录\n\n\n            _this4.getCatL1();\n\n            _this4.dialogFormVisible = false;\n\n            _this4.$notify.success({\n              title: '成功',\n              message: '创建成功'\n            });\n          }).catch(function (response) {\n            _this4.$notify.error({\n              title: '失败',\n              message: response.data.errmsg\n            });\n          });\n        }\n      });\n    },\n    handleUpdate: function handleUpdate(row) {\n      var _this5 = this;\n\n      this.dataForm = Object.assign({}, row);\n      this.dialogStatus = 'update';\n      this.dialogFormVisible = true;\n      this.$nextTick(function () {\n        _this5.$refs['dataForm'].clearValidate();\n      });\n    },\n    updateData: function updateData() {\n      var _this6 = this;\n\n      this.$refs['dataForm'].validate(function (valid) {\n        if (valid) {\n          (0, _category.updateCategory)(_this6.dataForm).then(function () {\n            _this6.getList(); // 更新L1目录\n\n\n            _this6.getCatL1();\n\n            _this6.dialogFormVisible = false;\n\n            _this6.$notify.success({\n              title: '成功',\n              message: '更新成功'\n            });\n          }).catch(function (response) {\n            _this6.$notify.error({\n              title: '失败',\n              message: response.data.errmsg\n            });\n          });\n        }\n      });\n    },\n    handleDelete: function handleDelete(row) {\n      var _this7 = this;\n\n      (0, _category.deleteCategory)(row).then(function (response) {\n        _this7.getList(); // 更新L1目录\n\n\n        _this7.getCatL1();\n\n        _this7.$notify.success({\n          title: '成功',\n          message: '删除成功'\n        });\n      }).catch(function (response) {\n        _this7.$notify.error({\n          title: '失败',\n          message: response.data.errmsg\n        });\n      });\n    }\n  }\n};\nexports.default = _default;",null]}